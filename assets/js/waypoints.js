(function(){var a=[].indexOf||function(c){for(var d=0,f=this.length;f>d;d++){if(d in this&&this[d]===c){return d}}return -1},b=[].slice;(function(c,d){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(e){return d(e,c)}):d(c.jQuery,c)})(this,function(B,x){var A,E,D,t,J,K,q,H,F,I,z,k,e,j,G,C;return A=B(x),H=a.call(x,"ontouchstart")>=0,t={horizontal:{},vertical:{}},J=1,q={},K="waypoints-context-id",z="resize.waypoints",k="scroll.waypoints",e=1,j="waypoints-waypoint-ids",G="waypoint",C="waypoints",E=function(){function c(d){var f=this;this.$element=d,this.element=d[0],this.didResize=!1,this.didScroll=!1,this.id="context"+J++,this.oldScroll={x:d.scrollLeft(),y:d.scrollTop()},this.waypoints={horizontal:{},vertical:{}},d.data(K,this.id),q[this.id]=this,d.bind(k,function(){var g;return f.didScroll||H?void 0:(f.didScroll=!0,g=function(){return f.doScroll(),f.didScroll=!1},x.setTimeout(g,B[C].settings.scrollThrottle))}),d.bind(z,function(){var g;return f.didResize?void 0:(f.didResize=!0,g=function(){return B[C]("refresh"),f.didResize=!1},x.setTimeout(g,B[C].settings.resizeThrottle))})}return c.prototype.doScroll=function(){var d,f=this;return d={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!H||d.vertical.oldScroll&&d.vertical.newScroll||B[C]("refresh"),B.each(d,function(m,n){var p,h,g;return g=[],h=n.newScroll>n.oldScroll,p=h?n.forward:n.backward,B.each(f.waypoints[m],function(i,l){var s,r;return n.oldScroll<(s=l.offset)&&s<=n.newScroll?g.push(l):n.newScroll<(r=l.offset)&&r<=n.oldScroll?g.push(l):void 0}),g.sort(function(i,l){return i.offset-l.offset}),h||g.reverse(),B.each(g,function(i,l){return l.options.continuous||i===g.length-1?l.trigger([p]):void 0})}),this.oldScroll={x:d.horizontal.newScroll,y:d.vertical.newScroll}},c.prototype.refresh=function(){var d,g,f,h=this;return f=B.isWindow(this.element),g=this.$element.offset(),this.doScroll(),d={horizontal:{contextOffset:f?0:g.left,contextScroll:f?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:f?0:g.top,contextScroll:f?0:this.oldScroll.y,contextDimension:f?B[C]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},B.each(d,function(i,l){return B.each(h.waypoints[i],function(p,v){var w,n,m,u,y;return w=v.options.offset,m=v.offset,n=B.isWindow(v.element)?0:v.$element.offset()[l.offsetProp],B.isFunction(w)?w=w.apply(v.element):"string"==typeof w&&(w=parseFloat(w),v.options.offset.indexOf("%")>-1&&(w=Math.ceil(l.contextDimension*w/100))),v.offset=n-l.contextOffset+l.contextScroll-w,v.options.onlyOnScroll&&null!=m||!v.enabled?void 0:null!==m&&m<(u=l.oldScroll)&&u<=v.offset?v.trigger([l.backward]):null!==m&&m>(y=l.oldScroll)&&y>=v.offset?v.trigger([l.forward]):null===m&&l.oldScroll>=v.offset?v.trigger([l.forward]):void 0})})},c.prototype.checkEmpty=function(){return B.isEmptyObject(this.waypoints.horizontal)&&B.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([z,k].join(" ")),delete q[this.id]):void 0},c}(),D=function(){function c(f,h,g){var l,d;g=B.extend({},B.fn[G].defaults,g),"bottom-in-view"===g.offset&&(g.offset=function(){var i;return i=B[C]("viewportHeight"),B.isWindow(h.element)||(i=h.$element.height()),i-B(this).outerHeight()}),this.$element=f,this.element=f[0],this.axis=g.horizontal?"horizontal":"vertical",this.callback=g.handler,this.context=h,this.enabled=g.enabled,this.id="waypoints"+e++,this.offset=null,this.options=g,h.waypoints[this.axis][this.id]=this,t[this.axis][this.id]=this,l=null!=(d=f.data(j))?d:[],l.push(this.id),f.data(j,l)}return c.prototype.trigger=function(d){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,d),this.options.triggerOnce?this.destroy():void 0):void 0},c.prototype.disable=function(){return this.enabled=!1},c.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},c.prototype.destroy=function(){return delete t[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},c.getWaypointsByElement=function(d){var g,f;return(f=B(d).data(j))?(g=B.extend({},t.horizontal,t.vertical),B.map(f,function(h){return g[h]})):[]},c}(),I={init:function(c,f){var d;return null==f&&(f={}),null==(d=f.handler)&&(f.handler=c),this.each(function(){var g,i,l,h;return g=B(this),l=null!=(h=f.context)?h:B.fn[G].defaults.context,B.isWindow(l)||(l=g.closest(l)),l=B(l),i=q[l.data(K)],i||(i=new E(l)),new D(g,i,f)}),B[C]("refresh"),this},disable:function(){return I._invoke(this,"disable")},enable:function(){return I._invoke(this,"enable")},destroy:function(){return I._invoke(this,"destroy")},prev:function(c,d){return I._traverse.call(this,c,d,function(f,g,h){return g>0?f.push(h[g-1]):void 0})},next:function(c,d){return I._traverse.call(this,c,d,function(f,g,h){return g<h.length-1?f.push(h[g+1]):void 0})},_traverse:function(f,g,h){var d,c;return null==f&&(f="vertical"),null==g&&(g=x),c=F.aggregate(g),d=[],this.each(function(){var i;return i=B.inArray(this,c[f]),h(d,i,c[f])}),this.pushStack(d)},_invoke:function(c,d){return c.each(function(){var f;return f=D.getWaypointsByElement(this),B.each(f,function(g,h){return h[d](),!0})}),this}},B.fn[G]=function(){var c,d;return d=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],I[d]?I[d].apply(this,c):B.isFunction(d)?I.init.apply(this,arguments):B.isPlainObject(d)?I.init.apply(this,[null,d]):d?B.error("The "+d+" method does not exist in jQuery Waypoints."):B.error("jQuery Waypoints needs a callback function or handler option.")},B.fn[G].defaults={context:x,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},F={refresh:function(){return B.each(q,function(c,d){return d.refresh()})},viewportHeight:function(){var c;return null!=(c=x.innerHeight)?c:A.height()},aggregate:function(c){var f,d,g;return f=t,c&&(f=null!=(g=q[B(c).data(K)])?g.waypoints:void 0),f?(d={horizontal:[],vertical:[]},B.each(d,function(h,i){return B.each(f[h],function(l,m){return i.push(m)}),i.sort(function(l,m){return l.offset-m.offset}),d[h]=B.map(i,function(l){return l.element}),d[h]=B.unique(d[h])}),d):[]},above:function(c){return null==c&&(c=x),F._filter(c,"vertical",function(d,f){return f.offset<=d.oldScroll.y})},below:function(c){return null==c&&(c=x),F._filter(c,"vertical",function(d,f){return f.offset>d.oldScroll.y})},left:function(c){return null==c&&(c=x),F._filter(c,"horizontal",function(d,f){return f.offset<=d.oldScroll.x})},right:function(c){return null==c&&(c=x),F._filter(c,"horizontal",function(d,f){return f.offset>d.oldScroll.x})},enable:function(){return F._invoke("enable")},disable:function(){return F._invoke("disable")},destroy:function(){return F._invoke("destroy")},extendFn:function(c,d){return I[c]=d},_invoke:function(c){var d;return d=B.extend({},t.vertical,t.horizontal),B.each(d,function(f,g){return g[c](),!0})},_filter:function(d,g,f){var h,c;return(h=q[B(d).data(K)])?(c=[],B.each(h.waypoints[g],function(i,l){return f(h,l)?c.push(l):void 0}),c.sort(function(i,l){return i.offset-l.offset}),B.map(c,function(i){return i.element})):[]}},B[C]=function(){var c,d;return d=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],F[d]?F[d].apply(null,c):F.aggregate.call(null,d)},B[C].settings={resizeThrottle:100,scrollThrottle:30},A.load(function(){return B[C]("refresh")})})}).call(this);
